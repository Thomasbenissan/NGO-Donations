{"ast":null,"code":"import React from'react';import{loadStripe}from'@stripe/stripe-js';import{Elements,CardElement,useStripe,useElements}from'@stripe/react-stripe-js';import rightArrow from'../assets/rightArrow.svg';import'../Form.css';// Import the CSS file\nimport{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const stripePromise=loadStripe('pk_test_51PUvGYDnU0bnacSN8IVpRzur6MRgdxgSumM0E2SmFBGcCY1XieKrADjLJlKImzdIiLmFuaNimjMZPlEsWWlLudAH00v0A0af9I');const CheckoutForm=_ref=>{let{amount,nextSlide}=_ref;const stripe=useStripe();const elements=useElements();const handleSubmit=async event=>{event.preventDefault();if(!stripe||!elements){return;}const response=await fetch('http://localhost:4242/create-payment-intent',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({amount:amount*100})// Stripe expects amount in cents\n});const{clientSecret}=await response.json();const result=await stripe.confirmCardPayment(clientSecret,{payment_method:{card:elements.getElement(CardElement),billing_details:{name:'Donor'}}});if(result.error){console.log(result.error.message);}else{if(result.paymentIntent.status==='succeeded'){console.log('Payment successful!');nextSlide();// Move to the next slide on successful payment\n}}};return/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,className:\"stripe-form\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"question\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"number\",children:\"4\"}),/*#__PURE__*/_jsx(\"img\",{src:rightArrow,className:\"arrow\",alt:\"Right Arrow\"}),\"You can easily complete your donation in the form below. All you need is a credit card.\"]}),/*#__PURE__*/_jsxs(\"div\",{className:\"description\",children:[\"Your credit card will be charged $\",amount,\".\"]}),/*#__PURE__*/_jsx(CardElement,{className:\"card-element\"}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"ok-button\",disabled:!stripe,children:\"Submit\"})]});};const Slide5=_ref2=>{let{nextSlide,amount}=_ref2;return/*#__PURE__*/_jsx(Elements,{stripe:stripePromise,children:/*#__PURE__*/_jsx(CheckoutForm,{amount:amount,nextSlide:nextSlide})});};export default Slide5;","map":{"version":3,"names":["React","loadStripe","Elements","CardElement","useStripe","useElements","rightArrow","jsx","_jsx","jsxs","_jsxs","stripePromise","CheckoutForm","_ref","amount","nextSlide","stripe","elements","handleSubmit","event","preventDefault","response","fetch","method","headers","body","JSON","stringify","clientSecret","json","result","confirmCardPayment","payment_method","card","getElement","billing_details","name","error","console","log","message","paymentIntent","status","onSubmit","className","children","src","alt","type","disabled","Slide5","_ref2"],"sources":["/Users/thomasbenissan/Desktop/Donation Form/src/Form/slides/Slide5.tsx"],"sourcesContent":["import React, { useEffect, useState } from 'react';\nimport { loadStripe } from '@stripe/stripe-js';\nimport { Elements, CardElement, useStripe, useElements } from '@stripe/react-stripe-js';\nimport rightArrow from '../assets/rightArrow.svg';\nimport '../Form.css'; // Import the CSS file\n\nconst stripePromise = loadStripe('pk_test_51PUvGYDnU0bnacSN8IVpRzur6MRgdxgSumM0E2SmFBGcCY1XieKrADjLJlKImzdIiLmFuaNimjMZPlEsWWlLudAH00v0A0af9I');\n\nconst CheckoutForm: React.FC<{ amount: number, nextSlide: () => void }> = ({ amount, nextSlide }) => {\n  const stripe = useStripe();\n  const elements = useElements();\n\n  const handleSubmit = async (event: React.FormEvent) => {\n    event.preventDefault();\n\n    if (!stripe || !elements) {\n      return;\n    }\n\n    const response = await fetch('http://localhost:4242/create-payment-intent', {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json',\n      },\n      body: JSON.stringify({ amount: amount * 100 }), // Stripe expects amount in cents\n    });\n\n    const { clientSecret } = await response.json();\n\n    const result = await stripe.confirmCardPayment(clientSecret, {\n      payment_method: {\n        card: elements.getElement(CardElement)!,\n        billing_details: {\n          name: 'Donor',\n        },\n      },\n    });\n\n    if (result.error) {\n      console.log(result.error.message);\n    } else {\n      if (result.paymentIntent.status === 'succeeded') {\n        console.log('Payment successful!');\n        nextSlide(); // Move to the next slide on successful payment\n      }\n    }\n  };\n\n  return (\n    <form onSubmit={handleSubmit} className=\"stripe-form\">\n      <div className=\"question\">\n        <span className=\"number\">4</span>\n        <img src={rightArrow} className=\"arrow\" alt=\"Right Arrow\" />\n        You can easily complete your donation in the form below. All you need is a credit card.\n      </div>\n      <div className=\"description\">\n        Your credit card will be charged ${amount}.\n      </div>\n      <CardElement className=\"card-element\" />\n      <button type=\"submit\" className=\"ok-button\" disabled={!stripe}>\n        Submit\n      </button>\n    </form>\n  );\n};\n\nconst Slide5: React.FC<{ nextSlide: () => void, amount: number }> = ({ nextSlide, amount }) => {\n  return (\n    <Elements stripe={stripePromise}>\n      <CheckoutForm amount={amount} nextSlide={nextSlide} />\n    </Elements>\n  );\n};\n\nexport default Slide5;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}